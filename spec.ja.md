# True Fulgora Conqueror — 仕様書（spec）

本書は TrueFulgoraConqueror の **設計意図・仕様・合意事項** を記録するためのドキュメントである。  
Mod Portal や README には記載しきれない「決定事項」を保持することを目的とする。

---

## 0. 目的と非目的

### 0.1 目的（Purpose）

- フルゴラにおいて、**遺跡（Ruins）を起点とした高密度・高圧力の防衛体験**を提供する
- 広大な防衛線ではなく、**限られた土地・限られた選択肢での工夫**を主題とする
- フルゴラを「安全に展開する惑星」ではなく、**制圧すべき惑星**として再定義する

### 0.2 非目的（Non-goals）

- 単に敵を強化・増量する Mod ではない
- 無限拡張・広域防衛を前提とした設計ではない
- 他惑星やグローバルな敵挙動を書き換えることは目的としない

---

## 1. Mod の位置づけ

- 分類：コンテンツ追加 / 敵挙動
- 対象環境：Factorio 2.0+ / Space Age
- 適用惑星：フルゴラ限定
- コアファンタジー：
  - 「フルゴラを征服する（Conquer）」という明確な目的意識

---

## 2. プレイヤー体験の基本ループ

1. フルゴラ上で遺跡を発見する
2. 遺跡を起点として敵が出現する
3. 狭い土地で防衛設備を構築する
4. 防衛配置を調整し、制圧を進める

※ 探索・発見 → 防衛 → 改善 の短いループを重視する

---

## 3. システム仕様概要

### 3.1 遺跡（Ruins）の扱い

- 本 Mod における「遺跡」とは：
  - 中規模以上の「フルゴラの遺構」を指す
  - 実装上は、「中規模のフルゴラの遺構」「大きなフルゴラの遺構」「巨大なフルゴラの遺構」「超巨大なフルゴラの遺構」「フルゴラの貯蔵庫の遺構」

- 遺跡の検出タイミング：
  - 定期イベントでの走査

---

### 3.2 敵のスポーン仕様

- スポーントリガ：
  - 30分ごとに、遺跡の周りからランダムに敵が出現する
  - バイター密度が一定以上の地域では、デモリッシャー出現フラグが立つ
  - これは、デモリッシャーがバイターを餌に這い出してきたという世界観に基づき、プレイヤーの対処が遅れれば致命的な状況に陥ることを意図したものである
- スポーン位置：
  - 遺跡を起点とする
- スポーン抑制条件：
  - デモリッシャーが200体以上居る場合は追加スポーンしない
  - プレイヤー建造物に近すぎる場合はデモリッシャーは追加スポーンしない
- スポーン頻度・強度：
  - 進化係数に応じて、徐々に高品質に、徐々に強力なMobが出現する

---

### 3.3 敵構成

- 使用する敵タイプ：
  - すべてのバイター、すべてのスピッター、すべてのワーム、すべてのデモリッシャー、すべての品質
- ウェーブ構成：
  - 30分毎のイベントで出現フラグを立てる
  - 30分間にロケット発射済みであればデモリッシャーが短距離、ロケットサイロ側に移動する

---

### 3.4 難易度制御

- 設定項目：
  - なし
- プレイヤーによる調整手段：
  - ロケットを飛ばさなければ、デモリッシャーから襲撃されることは稀
- 想定ベースライン：
  - 「初見では防衛ラインが何回か崩壊するくらいの厳しさ、慣れたら設計で対応可能」

---

## 4. 互換性ポリシー

- グローバルな敵定義・AI は極力変更しない
- フルゴラ限定のローカル挙動として完結させる
- 他 Mod との干渉が避けられない場合：
  - 明示的に仕様として記載する

---

## 5. セーブデータと決定性

- 使用するグローバルデータ：
  - storage.suumani_tfc
- マルチプレイ時の決定性：
  - 乱数は deterministic な手法を用いており、マルチプレイでの再現性を前提とする
  - 実装上の問題が見つかった場合はバグとして扱う

---

## 6. 既知の制約・問題

- 意図された挙動：
  - バイター、ワーム、バイターの巣、デモリッシャーの出現、バイターによる巣の拡張
- 既知の不具合：
  - 特になし
- バグと仕様の境界は、本 spec を基準に判断する

---

## 7. ロードマップ（開発者向け）

- 短期：
  - なし
- 中期：
  - なし
- 長期：
  - バグ修正のみ

---

## 8. 本 spec の扱い

- 本書は README や Mod Portal の内容より優先される
- 実装と乖離が生じた場合：
  - 実装を仕様とみなすか
  - spec を更新するか
  を明示的に判断する